/*
* rwdImageMaps vanilla Function v1.7
*
* Allows image maps to be used in a responsive design by recalculating the area coordinates to match the actual image size on load and window.resize
*
* Copyright (c) 2019 Luca Kiebel
* https://github.com/lucakiebel/vanilla-rwdImageMaps
* https://luca-kiebel.de
* Licensed under the MIT license
*/
function rwdImageMaps(a){function b(a){for(var b,c=0;c<a.length;c++)b=a[c],b.addEventListener("load",function(){var a=b.getAttribute("width"),c=b.getAttribute("height");if(!a||!c){var d=new Image;d.src=b.getAttribute("src"),a||(a=d.width),c||(c=d.height)}var e=window.getComputedStyle(b),f=e.getPropertyValue("width")/100,g=e.getPropertyValue("height")/100,i=b.getAttribute("usemap").replace("#","");Array.from(document.querySelector("map[name=\""+i+"\"]").querySelectorAll("area")).forEach(function(b){b.dataset.coords||(b.dataset.coords=b.getAttribute("coords"));for(var d=b.dataset.coords.split(","),e=Array(d.length),h=0;h<e.length;++h)e[h]=0==h%2?parseInt(100*(d[h]/a)*f):parseInt(100*(d[h]/c)*g);b.setAttribute("coords",e.toString())}),b.setAttribute("src",b.getAttribute("src"))})}var c=document.querySelectorAll(a);window.addEventListener("resize",function(){b(c)}),window.dispatchEvent(new Event("resize"))}
